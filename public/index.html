<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Motion CAPTCHA Prototype</title>

<!-- Bootstrap CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
<link rel="stylesheet" href="style.css">
</head>
<body class="d-flex justify-content-center align-items-center min-vh-100">

<button id="switchMobile" class="btn btn-secondary position-fixed" style="top:20px; right:20px;">
    Switch to Mobile View
</button>


<div id="captchaContainer" class="bg-dark card text-white p-4" style="max-width:500px; width:90%;">

    <!-- Top Row -->
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h5 class="m-0 title">CAPTCHA Security Check</h5>
        <div class="btn-group">
            <button id="retryBtn" class="btn btn-dark p-1" title="Retry"><i class="bi bi-arrow-clockwise fs-3 p-1"></i></button>
            <button id="infoBtn" class="btn btn-dark p-1" title="Info"><i class="bi bi-info-circle fs-3 p-1"></i></button>
            <button id="screenReaderBtn" class="btn btn-dark p-1" title="Screen Reader"><i class="bi bi-speaker fs-3 p-1"></i></button>
            <button id="accessibilityBtn" class="btn btn-dark p-1" title="Accessibility"><i class="bi bi-arrows-fullscreen fs-3 p-1"></i></button>
        </div>
    </div>

    <!-- Info link -->
    <p class="mb-3"><a href="https://en.wikipedia.org/wiki/CAPTCHA" target="_blank" class="text-white text-decoration-underline infoLink">What is this?</a></p>

    <!-- Canvas Container -->
    <div id="canvasWrapper" class="bg-secondary p-2 text-center mb-3">
        <p id="canvasPrompt" class="mb-2">Trace the image outlined below of a <b id="imageName">Heart</b></p>
        <div class="position-relative" style="height:400px;">
            <canvas id="outlineCanvas" width="400" height="400" class="position-absolute top-0 start-0 w-100 h-100"></canvas>
            <canvas id="traceCanvas" width="400" height="400" class="position-absolute top-0 start-0 w-100 h-100"></canvas>
        </div>
    </div>

    <!-- Feedback & Controls -->
    <div class="d-flex justify-content-between align-items-center">
        <div>
            <p id="feedbackAndAttempts" class="m-0 me-5 p-2"></p>
        </div>
        <div>
            <button id="continueBtn" class="btn btn-success" style="display:none;">CONTINUE</button>
            <button id="failRetryBtn" class="btn btn-warning" style="display:none;"></button>
            <button id="submitBtn" class="btn btn-primary">SUBMIT</button>
        </div>
    </div>

</div>

<!-- Info Modal -->
<div id="infoModal" class="modal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content p-3 text-dark">
            <div class="modal-header">
                <h5 class="modal-title">CAPTCHA Test Info</h5>
                <button type="button" class="btn-close closeModal"></button>
            </div>
            <div class="modal-body">
                <p>This test ensures a real human is interacting with the system. Trace the shape accurately to continue.</p>
            </div>
        </div>
    </div>
</div>

<!-- Congrats Modal -->
<div id="congratsModal" class="modal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content p-3 text-dark">
            <div class="modal-header">
                <h5 class="modal-title">Congratulations!</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <p>You successfully completed the CAPTCHA!</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-success" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>


<!-- Bootstrap JS Bundle -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<!-- Custom JS -->
<script src="script.js"></script>

<script>
document.getElementById("switchMobile").addEventListener("click", () => {
    window.location.href = "mobile.html";
});
</script>

</body>
</html>
